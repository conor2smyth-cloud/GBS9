<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tonight's Event - GBS9</title>
  <link rel="stylesheet" href="css/style.css?v=20251013">
  <script src="js/header.js" defer></script>
</head>
<body>
  <!-- Global Header -->
  <header id="site-header"></header>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tonight's Event</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- ðŸ”¥ Global Header -->
  <header>
    <script src="js/header.js" defer></script>
  </header>

  <main>
    <section class="event-tabs">
      <!-- Tab Navigation -->
      <div class="tab-nav">
        <button class="tab-btn active" data-tab="sip">Sip</button>
        <button class="tab-btn" data-tab="tip">Tip</button>
        <button class="tab-btn" data-tab="celebrate">Celebrate</button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        <div class="tab-panel active" id="sip">
          <h2>Sip</h2>
          <p class="cascade">Discover tonightâ€™s curated cocktail list.</p>
          <p class="cascade">Expertly shaken, stirred, and served.</p>
          <a href="#" class="btn cascade">Explore Cocktails</a>
        </div>

        <div class="tab-panel" id="tip">
          <h2>Tip</h2>
          <p class="cascade">Find your perfect bartenderâ€™s tip.</p>
          <p class="cascade">Quick tricks and insider knowledge.</p>
          <a href="#" class="btn cascade">Learn More</a>
        </div>

        <div class="tab-panel" id="celebrate">
          <h2>Celebrate</h2>
          <p class="cascade">Raise a glass to tonightâ€™s vibe.</p>
          <p class="cascade">Share the moment with your crew.</p>
          <a href="#" class="btn cascade">Celebrate Now</a>
        </div>
      </div>
    </section>
  </main>

<!-- at end of tonights-event.html body -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
<script src="js/firebase.js"></script>
<script>
document.addEventListener("DOMContentLoaded", async () => {
  const sipPanel = document.getElementById("sip");
  try {
    const [catRes, snap] = await Promise.all([
      fetch("data/drinks.json").then(r=>r.json()),
      FirebaseAPI.db.collection("tonight").doc("menu").get()
    ]);
    const tonight = snap.exists ? snap.data() : { cocktails:[], beer:[], spirits:[], mixers:[] };

    // Build a quick lookup by name so we can show blurb/image
    const catalog = [
      ...(catRes.cocktails||[]).map(d=>({ ...d, type:"cocktail" })),
      ...(catRes.beer||[]).map(d=>({ ...d, type:"beer" })),
      ...(catRes.spirits||[]).map(d=>({ ...d, type:"spirit" })),
      ...(catRes.mixers||[]).map(d=>({ ...d, type:"mixer" })),
    ];
    const byName = new Map(catalog.map(d => [d.name, d]));

    const chosen = []
      .concat((tonight.cocktails||[]).map(n=>byName.get(n)).filter(Boolean))
      .concat((tonight.beer||[]).map(n=>byName.get(n)).filter(Boolean))
      .concat((tonight.spirits||[]).map(n=>byName.get(n)).filter(Boolean));

    // Simple grid cards (digital view)
    sipPanel.innerHTML = `
      <h2>Tonightâ€™s Menu</h2>
      <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;">
        ${chosen.map(d => `
          <div class="card">
            <img src="images/${d.image || 'coming-soon.jpg'}" alt="${d.name}">
            <div class="card-body">
              <h3>${d.name}</h3>
              ${d.short ? `<p>${d.short}</p>` : ""}
              <a href="#" class="btn" data-modal="${d.name}">Details</a>
            </div>
          </div>
        `).join("")}
      </div>
    `;

    // TODO: hook into your existing modal.js to open details by name

  } catch (e) {
    console.error(e);
    sipPanel.innerHTML = "<p>Couldnâ€™t load tonightâ€™s menu.</p>";
  }
});
</script>


  <!-- ðŸ”¥ Global Footer -->
  <footer>
    <p>&copy; 2025 GBS9. All rights reserved.</p>
  </footer>

  <!-- Scripts -->
  <script src="js/tonights-event.js" defer></script>
</body>
</html>

