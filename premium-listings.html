<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Premium Listings | GBS9</title>
  <link rel="stylesheet" href="css/style.css">
  <script defer src="js/header.js"></script>
  <style>
    .filters {
      margin: 2rem auto;
      display: flex;
      gap: 1rem;
      justify-content: center;
    }
    .filters select, .filters input {
      padding: 0.5rem 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
      padding: 2rem;
    }
    .card {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      overflow: hidden;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: translateY(-6px);
    }
    .card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .card-content {
      padding: 1rem 1.5rem;
    }
    .card h3 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
      font-family: 'Playfair Display', serif;
    }
    .card p {
      color: #555;
      font-size: 0.95rem;
    }
    .tag {
      font-size: 0.8rem;
      background: #eee;
      border-radius: 6px;
      padding: 0.2rem 0.5rem;
      margin-right: 0.3rem;
    }
  </style>
</head>
<body>
  <div id="header"></div>

  <main>
    <h1 class="page-title">Premium Cocktail Listings</h1>

    <div class="filters">
      <select id="filter-base">
        <option value="">Filter by Base Spirit</option>
      </select>
      <select id="filter-glass">
        <option value="">Filter by Glass Type</option>
      </select>
      <input type="text" id="search" placeholder="Search by ingredient...">
    </div>

    <div id="cocktail-grid" class="grid"></div>
  </main>

  <script>
    async function loadCocktails() {
      const res = await fetch('data/cocktails.json');
      const cocktails = await res.json();

      // Populate filters
      const bases = [...new Set(cocktails.map(c => c.base))].sort();
      const glasses = [...new Set(cocktails.map(c => c.glass))].sort();

      const baseSelect = document.getElementById('filter-base');
      const glassSelect = document.getElementById('filter-glass');

      bases.forEach(base => {
        const opt = document.createElement('option');
        opt.value = base;
        opt.textContent = base;
        baseSelect.appendChild(opt);
      });

      glasses.forEach(glass => {
        const opt = document.createElement('option');
        opt.value = glass;
        opt.textContent = glass;
        glassSelect.appendChild(opt);
      });

      function render(filtered) {
        const grid = document.getElementById('cocktail-grid');
        grid.innerHTML = '';

        filtered.forEach(c => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <img src="images/cocktails/${c.image}" alt="${c.name}">
            <div class="card-content">
              <h3>${c.name}</h3>
              <p>${c.short}</p>
              <div>
                <span class="tag">${c.base}</span>
                <span class="tag">${c.glass}</span>
              </div>
            </div>
          `;
          grid.appendChild(card);
        });
      }

      // Initial render
      render(cocktails);

      // Filters
      function applyFilters() {
        const base = baseSelect.value;
        const glass = glassSelect.value;
        const search = document.getElementById('search').value.toLowerCase();

        const filtered = cocktails.filter(c => {
          return (!base || c.base === base) &&
                 (!glass || c.glass === glass) &&
                 (!search || c.ingredients.some(i => i.toLowerCase().includes(search)));
        });

        render(filtered);
      }

      baseSelect.addEventListener('change', applyFilters);
      glassSelect.addEventListener('change', applyFilters);
      document.getElementById('search').addEventListener('input', applyFilters);
    }

    loadCocktails();
  </script>
</body>
</html>
